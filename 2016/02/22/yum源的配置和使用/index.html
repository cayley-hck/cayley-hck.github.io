<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录前进的脚步"><title>yum源的配置和使用 | 凯旋</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">yum源的配置和使用</h1><a id="logo" href="/.">凯旋</a><p class="description">cayley的博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">yum源的配置和使用</h1><div class="post-meta"><i class="fa fa-calendar"> 2016-02-22</i><span class="categories"> | <i class="fa fa-folder-open"> 分类于<a href="/categories/liunx/"> liunx</a></i></span></div><span data-disqus-identifier="2016/02/22/yum源的配置和使用/" class="disqus-comment-count"></span><div class="post-content"><p>1.yum?<br>Yum（Yellow dog Updater, Modified）是一个在Fedora和RedHat以及CentOS中基于RPM包的软件包管理器。能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，自动安装软件.<br>yum 的主要功能是自动化地升级，安装/移除rpm包，收集rpm 包的相关信息，检查依赖性并自动提示用户解决.</p>
<p>yum 主要要有可靠的软件的仓库(repository),它可以是http 或ftp 站点，也可以是本地软件池，但必须包含rpm 的header，header 包括了rpm 包的各种信息，包括描述，功能，提供的文件，依赖性等。正是收集了这些header 并加以分析，才能自动化地完成余下的任务。</p>
<p>yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性.</p>
<p>查看本机安装的yum:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="preprocessor"># rpm -qa|grep yum</span></span><br><span class="line">yum-<span class="number">3.4</span><span class="number">.3</span>-<span class="number">132.</span>el7.centos<span class="number">.0</span><span class="number">.1</span>.noarch  <span class="preprocessor">#yum主程序</span></span><br><span class="line">yum-plugin-fastestmirror-<span class="number">1.1</span><span class="number">.31</span>-<span class="number">34.</span>el7.noarch <span class="preprocessor">#快速从资源库中查找bao的yum 插件</span></span><br><span class="line">yum-metadata-parser-<span class="number">1.1</span><span class="number">.4</span>-<span class="number">10.</span>el7.x86_64 <span class="preprocessor">#分析 metadata</span></span><br></pre></td></tr></table></figure>
<p>centos 默认安装有yum,如果liunx没有安装yum,可以通过下载rpm包.<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//mirrors.163.com/centos/6/os/x86_64/Packages/python-iniparse-0.3.1-2.1.el6.noarch.rpm </span></span><br><span class="line">wget http:<span class="comment">//mirrors.163.com/centos/6/os/x86_64/Packages/yum-metadata-parser-1.1.2-16.el6.x86_64.rpm </span></span><br><span class="line">wget http:<span class="comment">//mirrors.163.com/centos/6/os/x86_64/Packages/yum-3.2.29-40.el6.centos.noarch.rpm  </span></span><br><span class="line">wget http:<span class="comment">//mirrors.163.com/centos/6/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.30-14.el6.noarch.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># rpm -ivh yum-<span class="number">3.2</span><span class="number">.22</span>-<span class="number">33.</span>el5.centos.noarch.rpm yum-fastestmirror-<span class="number">1.1</span><span class="number">.16</span>-<span class="number">14.</span>el5.centos<span class="number">.1</span>.noarch.rpm yum-metadata-parser-<span class="number">1.1</span><span class="number">.2</span>-<span class="number">3.</span>el5.centos.i386.rpm</span></span><br></pre></td></tr></table></figure></p>
<p>2.配置</p>
<p>yum 的配置文件分为两部分：main和repository</p>
<p>main 定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。<br>repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。</p>
<p>1)yum.conf</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">[main]</span></span><br><span class="line"><span class="comment">#yum的缓存目录.yum下载的rpm版保存的位置 ,默认/var/cache/yum</span></span><br><span class="line"><span class="setting">cachedir=<span class="value">/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span></span></span></span><br><span class="line"><span class="comment">#安装后是否保存软件包,0(默认),不保存 1 保存</span></span><br><span class="line"><span class="setting">keepcache=<span class="value"><span class="number">0</span></span></span></span><br><span class="line"><span class="comment">#debug信息输出等级, 范围0-10 ,默认2</span></span><br><span class="line"><span class="setting">debuglevel=<span class="value"><span class="number">2</span></span></span></span><br><span class="line"><span class="comment">#日志文件位置</span></span><br><span class="line"><span class="setting">logfile=<span class="value">/var/log/yum.log</span></span></span><br><span class="line"><span class="comment"># 1 yum只安装和系统架构匹配的软件包 0 则相反</span></span><br><span class="line"><span class="setting">exactarch=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="comment"># 1 允许更新陈旧软件包</span></span><br><span class="line"><span class="setting">obsoletes=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="comment">#是否进行gpg校验，如果没有这一项，默认是1。</span></span><br><span class="line"><span class="setting">gpgcheck=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="comment">#是否启用插件，默认1为允许，0表示不允许。我们一般会用yum-fastestmirror这个插件。</span></span><br><span class="line"><span class="setting">plugins=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="setting">installonly_limit=<span class="value"><span class="number">5</span></span></span></span><br><span class="line"><span class="setting">bugtracker_url=<span class="value">http://bugs.centos.org/set_project.php?project_id=<span class="number">23</span>&amp;ref=http://bugs.centos.org/bug_report_page.php?category=yum</span></span></span><br><span class="line"><span class="comment">#指定一个软件包，yum 会根据这个包判断你的发行版本，默认是redhat-release，也可以是安装的任何针对自己发行版的rpm 包。</span></span><br><span class="line"><span class="setting">distroverpkg=<span class="value">centos-release</span></span></span><br><span class="line"><span class="comment">#包的策略。一共有两个选项，newest 和last，这个作用是如果你设置了多个repository，而同一软件在不同的repository 中同时存在，</span></span><br><span class="line"><span class="comment">#yum 应该安装哪一个，如果是newest，则yum 会安装最新的那个版本。如果是last，则yum 会将服务器id 以字母表排序，并选择最后的那个服务器上的软件安装。一般都是选newest。</span></span><br><span class="line"><span class="setting">pkgpolicy=<span class="value">newest</span></span></span><br><span class="line"><span class="comment">#有1和0两个选项，表示yum 是否容忍命令行发生与软件包有关的错误，比如你要安装1,2,3三个包，而其中3此前已经安装了，如果你设为1,则yum 不会出现错误信息。默认是0</span></span><br><span class="line"><span class="setting">tolerant=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="comment">#exclude 排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。</span></span><br><span class="line"><span class="comment">#exclude=xxx</span></span><br><span class="line"><span class="comment">#设置 keepcache=1，yum 在成功安装软件包之后保留缓存的头文件 (headers) 和软件包。默认值为 keepcache=0 不保存</span></span><br><span class="line"><span class="comment">#keepcache=[1 or 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  This is the default, if you make this bigger yum won't see if the metadata</span></span><br><span class="line"><span class="comment"># is newer on the remote and so you'll "gain" the bandwidth of not having to</span></span><br><span class="line"><span class="comment"># download the new metadata and "pay" for it by yum not having correct</span></span><br><span class="line"><span class="comment"># information.</span></span><br><span class="line"><span class="comment">#  It is esp. important, to have correct metadata, for distributions like</span></span><br><span class="line"><span class="comment"># Fedora which don't keep old packages around. If you don't like this checking</span></span><br><span class="line"><span class="comment"># interupting your command line usage, it's much better to have something</span></span><br><span class="line"><span class="comment"># manually check the metadata once an hour (yum-updatesd will do this).</span></span><br><span class="line"><span class="comment"># metadata_expire=90m</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PUT YOUR REPOS HERE OR IN separate files named file.repo</span></span><br><span class="line"><span class="comment"># in /etc/yum.repos.d</span></span><br><span class="line"><span class="comment">#默认都会被include 进来 也就是说 /etc/yum.repos.d/xx.repo 无论配置文件有多少个 每个里面有多少个[name] 最后其实都被整合到 一个里面看就是了 重复的[name]后面的覆盖前面的</span></span><br><span class="line"><span class="setting">reposdir=<span class="value">/etc/yum.repos.d/</span></span></span><br></pre></td></tr></table></figure>
<p>2)rpo配置</p>
<p>yum可以配置多个资源库,可以在/etc/yum.repos.d/新增和修改,也可以在/etc/yum.conf直接配置.<br>格式:<br>[serverid] #唯一<br>name=Some name for this server<br>baseurl=url://path/to/repository/<br>serverid 是用于区别各个不同的repository，必须有一个独一无二的名称；<br>name 是对repository 的描述，支持像$releasever $basearch这样的变量；<br>baseurl 是服务器设置中最重要的部分，只有设置正确，才能从上面获取软件。url 支持的协议有 http:// ftp:// file:// </p>
<p>例如下面:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[centosplus]</span><br><span class="line"><span class="preprocessor">#支持$releasever(发行版本) $basearch(cpu的基本体系组) $arch(cpu体系)这样的变量</span></span><br><span class="line">name=CentOS-$releasever - Plus - <span class="number">163.</span>com</span><br><span class="line">baseurl=http:<span class="comment">//mirrors.163.com/centos/$releasever/centosplus/$basearch/</span></span><br><span class="line">使用gpg对包进行校验，确保下载包的完整性</span><br><span class="line">gpgcheck=<span class="number">1</span></span><br><span class="line"><span class="preprocessor">##当某个软件仓库被配置成 enabled=<span class="number">0</span> 时，yum 在安装或升级软件包时不会将该仓库做为软件包提供源。使用这个选项，可以启用或禁用软件仓库。</span></span><br><span class="line"><span class="preprocessor">#通过 yum 的 --enablerepo=[repo_name] 和 --disablerepo=[repo_name] 选项，或者通过 PackageKit 的<span class="string">"添加/删除软件"</span>工具，也能够方便地启用和禁用指定的软件仓库</span></span><br><span class="line">enabled=<span class="number">0</span></span><br><span class="line"><span class="preprocessor">#确保下载包的完整性，可以指定repository站点的gpg key.</span></span><br><span class="line">gpgkey=http:<span class="comment">//mirrors.163.com/centos/RPM-GPG-KEY-CentOS-7</span></span><br></pre></td></tr></table></figure></p>
<p>还有注意的是,如果要使用gpg对包进行校验,还需要导入每个reposity的GPG,先到repo库站点下载,然后用<br>rpm –import xxx.txt 命令将它们导入.<br>最好把发行版自带GPG-KEY也导入，rpm –import /usr/share/doc/redhat-release-*/RPM-GPG-KEY 官方软件升级用的上.</p>
<p>3)更换yum源<br>有时候centos的自动的yum地址访问不了,或者下载速度太慢,可以换为国内的地址:<br>如换为网易163 yum源:</p>
<p>推荐先备份/etc/yum.repos.d/CentOS-Base.repo<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span> /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span><span class="class">.backup</span></span><br></pre></td></tr></table></figure></p>
<p>然后修改/etc/yum.repos.d/CentOS-Base.repo文件<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line"><span class="comment"># update status of each mirror to pick mirrors that are updated to and</span></span><br><span class="line"><span class="comment"># geographically close to the client.  You should use this for CentOS updates</span></span><br><span class="line"><span class="comment"># unless you are manually picking other mirrors.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If the mirrorlist= does not work for you, as a fall back you can try the </span></span><br><span class="line"><span class="comment"># remarked out baseurl= line instead.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="title">[base]</span></span><br><span class="line"><span class="setting">name=<span class="value">CentOS-<span class="variable">$releasever</span> - Base - <span class="number">163</span>.com</span></span></span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span></span><br><span class="line"><span class="setting">baseurl=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span></span></span><br><span class="line"><span class="setting">gpgcheck=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="setting">gpgkey=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">#released updates</span></span><br><span class="line"><span class="title">[updates]</span></span><br><span class="line"><span class="setting">name=<span class="value">CentOS-<span class="variable">$releasever</span> - Updates - <span class="number">163</span>.com</span></span></span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span></span><br><span class="line"><span class="setting">baseurl=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/<span class="variable">$releasever</span>/updates/<span class="variable">$basearch</span>/</span></span></span><br><span class="line"><span class="setting">gpgcheck=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="setting">gpgkey=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line"><span class="title">[extras]</span></span><br><span class="line"><span class="setting">name=<span class="value">CentOS-<span class="variable">$releasever</span> - Extras - <span class="number">163</span>.com</span></span></span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span></span><br><span class="line"><span class="setting">baseurl=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/</span></span></span><br><span class="line"><span class="setting">gpgcheck=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="setting">gpgkey=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line"><span class="title">[centosplus]</span></span><br><span class="line"><span class="setting">name=<span class="value">CentOS-<span class="variable">$releasever</span> - Plus - <span class="number">163</span>.com</span></span></span><br><span class="line"><span class="setting">baseurl=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/</span></span></span><br><span class="line"><span class="setting">gpgcheck=<span class="value"><span class="number">1</span></span></span></span><br><span class="line"><span class="setting">enabled=<span class="value"><span class="number">0</span></span></span></span><br><span class="line"><span class="setting">gpgkey=<span class="value">http://mirrors.<span class="number">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span></span></span><br></pre></td></tr></table></figure></p>
<p>最后清除旧缓存,生产新缓存<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yum</span> clean <span class="literal">all</span></span><br><span class="line"><span class="keyword">yum</span> makecache</span><br></pre></td></tr></table></figure></p>
<p>更换为阿里云yum源:<br>有时候服务器使用的阿里云的话,换为阿里云的yum源会比较快.<br>阿里云Linux安装镜像源地址：<a href="http://mirrors.aliyun.com/" target="_blank" rel="external">http://mirrors.aliyun.com/</a><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#备份原镜像文件(老规矩)</span><br><span class="line">mv /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span> /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span><span class="class">.backup</span></span><br><span class="line">#下载新的CentOS-Base<span class="class">.repo</span> 到/etc/yum<span class="class">.repos</span><span class="class">.d</span>/</span><br><span class="line"><span class="id">#CentOS</span> <span class="number">5</span></span><br><span class="line">wget -O /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-5.repo</span></span><br><span class="line"><span class="id">#CentOS</span> <span class="number">6</span></span><br><span class="line">wget -O /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-6.repo</span></span><br><span class="line"><span class="id">#CentOS</span> <span class="number">7</span></span><br><span class="line">wget -O /etc/yum<span class="class">.repos</span><span class="class">.d</span>/CentOS-Base<span class="class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line">#生成缓存</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure></p>
<p>当然国内还有其他的yum源</p>
<p>3.yum命令使用</p>
<p>Usage: yum [options] COMMAND</p>
<p>List of Commands:<br>检查问题<br>check          Check for problems in the rpmdb<br>检查可更新的程序<br>check-update   Check for available package updates<br>清除缓存<br>clean          Remove cached data<br>yum clean packages 清除缓存目录下的软件包<br>yum clean headers 清除缓存目录下的 headers<br>yum clean oldheaders 清除缓存目录下旧的 headers<br>yum clean, yum clean all (= yum clean packages; yum clean oldheaders) 清除缓存目录下的软件包及旧的headers</p>
<p>查看包的依赖列表<br>deplist        List a package’s dependencies</p>
<p>distribution-synchronization Synchronize installed packages to the latest available versions<br>downgrade      downgrade a package<br>erase          Remove a package or packages from your system<br>fs             Creates filesystem snapshots, or lists/deletes current snapshots.<br>fssnapshot     Creates filesystem snapshots, or lists/deletes current snapshots.<br>groups         Display, or use, the groups information<br>显示帮助信息<br>help           Display a helpful usage message<br>显示使用历史<br>history        Display, or use, the transaction history<br>显示包信息<br>info           Display details about a package or group of packages<br>安装指定包<br>install        Install a package or packages on your system<br>列出所有可安裝的软件清单<br>list           List a package or groups of packages<br>load-transaction load a saved transaction from filename<br>生产缓存<br>makecache      Generate the metadata cache<br>provides       Find what package provides the given value<br>删除指定的rpm软件包<br>remove<br>重新安装<br>reinstall      reinstall a package<br>repo-pkgs      Treat a repo. as a group of packages, so we can install/remove all of them<br>repolist       Display the configured software repositories<br>搜索软件包<br>search         Search package details for the given string<br>进入yum的shell提示符<br>shell          Run an interactive yum shell<br>swap           Simple way to swap packages, instead of using shell<br>全部更新<br>update         Update a package or packages on your system<br>update-minimal Works like upgrade, but goes to the ‘newest’ package match which fixes a problem that affects your system<br>yum update 全部更新<br>yum update package1 更新指定程序包package1</p>
<p>updateinfo     Acts on repository update information<br>升级指定程序包<br>upgrade        Update packages taking obsoletes into account<br>显示yum版本信息<br>version        Display a version for the machine and/or available repos.</p>
<p>Options:<br>  -h, –help            show this help message and exit  显示帮助信息<br>  -t, –tolerant        be tolerant of errors 包错误是否执行<br>  -C, –cacheonly       run entirely from system cache, don’t update cache  缓存安装,完全从缓存中运行，而不去下载或者更新任何头文件。</p>
<p>  -c [config file], –config=[config file]  指定配置文件<br>                        config file location<br>  -R [minutes], –randomwait=[minutes]   设置yum处理一个命令的最大等待之间<br>                        maximum command wait time<br>  -d [debug level], –debuglevel=[debug level]  设置调试等级(0-10)<br>                        debugging output level<br>  –showduplicates      show duplicates, in repos, in list/search commands<br>  -e [error level], –errorlevel=[error level] 设置错误等级(0-10)<br>                        error output level<br>  –rpmverbosity=[debug level name]<br>                        debugging output level for rpm<br>  -q, –quiet           quiet operation 安装模式,不显示信息<br>  -v, –verbose         verbose operation 显示操作信息<br>  -y, –assumeyes       answer yes for all questions 允许安装<br>  –assumeno            answer no for all questions<br>  –version             show Yum version and exit<br>  –installroot=[path]  set install root<br>  –enablerepo=[repo]   enable one or more repositories (wildcards allowed)<br>  –disablerepo=[repo]  disable one or more repositories (wildcards allowed)<br>  -x [package], –exclude=[package]<br>                        exclude package(s) by name or glob<br>  –disableexcludes=[repo]<br>                        disable exclude from main, for a repo or for<br>                        everything<br>  –disableincludes=[repo]<br>                        disable includepkgs for a repo or for everything<br>  –obsoletes           enable obsoletes processing during updates<br>  –noplugins           disable Yum plugins  禁止使用插件<br>  –nogpgcheck          disable gpg signature checking  不进行gpg检查<br>  –disableplugin=[plugin]    根据插件名称禁止使用插件<br>                        disable plugins by name<br>  –enableplugin=[plugin]      启用某个插件<br>                        enable plugins by name<br>  –skip-broken         skip packages with depsolving problems<br>  –color=COLOR         control whether color is used<br>  –releasever=RELEASEVER<br>                        set value of $releasever in yum config and repo files<br>  –downloadonly        don’t update, just download<br>  –downloaddir=DLDIR   specifies an alternate directory to store packages<br>  –setopt=SETOPTS      set arbitrary config and repo options<br>  –bugfix              Include bugfix relevant packages, in updates<br>  –security            Include security relevant packages, in updates<br>  –advisory=ADVS, –advisories=ADVS<br>                        Include packages needed to fix the given advisory, in<br>                        updates<br>  –bzs=BZS             Include packages needed to fix the given BZ, in<br>                        updates<br>  –cves=CVES           Include packages needed to fix the given CVE, in<br>                        updates<br>  –sec-severity=SEVS, –secseverity=SEVS<br>                        Include security relevant packages matching the<br>                        severity, in updates</p>
<p>参考:<br><a href="http://mirrors.163.com/.help/centos.html" target="_blank" rel="external">163CentOS镜像使用帮助</a><br><a href="http://man.linuxde.net/rpm" target="_blank" rel="external">rpm命令</a><br><a href="http://man.linuxde.net/yum" target="_blank" rel="external">yum命令</a></p>
</div><a data-url="http://b.miaoxiaohei.com/2016/02/22/yum源的配置和使用/" data-id="cir7uxjuw000kjvi0qmvq2m4i" class="article-share-link">分享到</a><div class="tags"><a href="/tags/yum/">yum</a></div><div class="post-nav"><a href="/2016/02/23/shadowsocks安装/" class="pre"><i class="fa fa-caret-left"> shadowsocks安装</i></a><a href="/2016/02/19/php7和nginx1-9安装脚本/" class="next">php7和nginx1.9安装脚本 <i class="fa fa-caret-right"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'cayleyblogs';
var disqus_identifier = '2016/02/22/yum源的配置和使用/';
var disqus_title = 'yum源的配置和使用';
var disqus_url = 'http://b.miaoxiaohei.com/2016/02/22/yum源的配置和使用/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//cayleyblogs.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="si" value="http://b.miaoxiaohei.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/liunx/">liunx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/composer/" style="font-size: 15px;">composer</a> <a href="/tags/https/" style="font-size: 15px;">https</a> <a href="/tags/科学上网/" style="font-size: 15px;">科学上网</a> <a href="/tags/libiconv/" style="font-size: 15px;">libiconv</a> <a href="/tags/yum/" style="font-size: 15px;">yum</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/路由宝刷机pandorabox后利用自带存储卡/">路由宝刷机pandorabox后利用自带存储卡</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/使用ownCloud搭建云盘/">使用ownCloud搭建云盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/编译安装libiconv库/">编译安装libiconv库</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/使用seafile搭建云盘/">使用seafile搭建云盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/17/nginx的使用与配置/">nginx的使用与配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/nginx安装分析/">nginx安装分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis安全/">redis安全</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis高级命令/">redis高级命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis基本命令/">redis基本命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis配置/">redis配置</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//cayleyblogs.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">凯旋.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>