<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录前进的脚步"><title>配置SSL证书+搭建HTTPS | 凯旋</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">配置SSL证书+搭建HTTPS</h1><a id="logo" href="/.">凯旋</a><p class="description">cayley的博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">配置SSL证书+搭建HTTPS</h1><div class="post-meta"><i class="fa fa-calendar"> 2016-02-19</i><span class="categories"> | <i class="fa fa-folder-open"> 分类于<a href="/categories/liunx/"> liunx</a></i></span></div><span data-disqus-identifier="2016/02/19/配置SSL证书-搭建HTTPS/" class="disqus-comment-count"></span><div class="post-content"><p>配置SSL证书+搭建HTTPS:<br>1.https:<br>超文本传输安全协议（缩写：HTTPS，全称：Hypertext Transfer Protocol Secure）是超文本传输协议和SSL/TLS的组合，用以提供加密通讯及对网络服务器身份的鉴定。HTTPS连接经常被用于万维网上的交易支付和企业信息系统中敏感信息的传输。HTTPS不应与在RFC 2660中定义的安全超文本传输协议（S-HTTP）相混。<br>HTTPS 目前已经是所有注重隐私和安全的网站的首选.<br>SSL/TLS:<br>理论上讲这是两个协议，后者是前者的继任者，但其实 SSL 3.0 和 TLS 1.0 的差异很小，所以两者很多时候是混为一谈的,这两个都是传输层协议，在他们的基础上可以建议应用层的协议如 FTP 和 Telnet，上面说的 HTTPS 就是建立在 SSL/TLS 基础上的 HTTP。<br>证书<br>这里的证书主要指使用公私钥对加密的证书。这里所说的证书是SSL/TLS证书 证书了。一般用于服务器加密（网页、邮件服务等），也就是部署 HTTPS 时所必须的。<br>这里出现的证书都是用公私钥加密的证书。这涉及到 [[非对称加密]] 技术，每张证书都由一个公钥和一个私钥组成，两个拼在一起才是一套。所以公钥是可以随便发给别人看的，而私钥一定是要保密的，如果私钥泄漏，后果很严重的哦。</p>
<p>信任链与 CA<br>CA 就是数字证书认证中心，是证书的签发机构.<br>信任链是证书的世界里有一套信任体系,谁都可以做证书的，只是做出来的证书有没有人相信而已,所以有几家特别靠谱的CA都被浏览器愿意信任,把它们的根证书都列为信任了.所以说能获取得到这些Ca签署的证书也会被主流浏览器所信任的.</p>
<p>这里记录配置 SSL 证书 + 搭建 HTTPS的过程</p>
<p>2.获取crt证书</p>
<p>1)使用 OpenSSL 生成 SSL Key 和 CSR<br>前提条件:先安装openSSl<br>这里我使用yum安装:<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum <span class="keyword">install</span> -y openssl</span><br></pre></td></tr></table></figure><br>目前在 SSL证书购买时，有三种不同的资料验证方式，从而产生了三类SSL证书。</p>
<p>域名型SSL证书（DV SSL） ，即只对域名的所有者（一般是域名管理员邮箱，比如admin@hotmail.com）进行在线检查，具体是发送验证邮件给域名管理员或以该域名结尾的邮箱至于该域名的管理员是真实注册的单位还是另有其人，就不得而知了。</p>
<p>企业型 SSL 证书（OV SSL） ，是要购买者提交组织机构资料和单位授权信等在官方注册的凭证，认证机构在签发SSL证书前不仅仅要检验域名所有权，还必须对这些资料的真实合法性进行多方查验，只有通过验证的才能颁发SSL证书。</p>
<p>增强型 SSL 证书（EV SSL） ，与其他SSL证书一样，都是基于SSL/TLS安全协议，都是用于网站的身份验证和信息在网上的传输加密。它跟普通SSL证书的区别也是明显的，安全浏览器的地址栏变绿，如果是不受信的SSL证书则拒绝显示，如果是钓鱼网站，地址栏则会变成红色，以警示用户</p>
<p>EV SSL 证书获取比较严格,所以这里一般中小站长/企业,申请DV|OV比较多.</p>
<p>无论你用 DV 还是 OV 生成私钥，都需要填写一些基本信息，具体信息如下：</p>
<p>CN:<br>域名，也称为 Common Name，因为特殊的证书不一定是域名：xiaohei.com<br>O:<br>组织或公司名字（Organization）：cayley<br>OU:<br>部门（Department）：可以不填写，这里我们写 Web Security<br>L:<br>城市（City）：Shenzhen<br>ST:<br>省份（State / Province）：Guangdong<br>C:<br>国家（Country）：CN</p>
<p>加密位数:<br>一般加密强度：2048 位，如果你的机器性能强劲，也可以选择 4096 位</p>
<p>所以根据上面的信息，使用 OpenSSL 生成 key 和 csr 的命令:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -newkey rsa:<span class="number">2048</span> -sha256 -nodes -out <span class="tag">b</span><span class="class">.miaoxiaohei</span><span class="class">.com</span><span class="class">.csr</span> -keyout <span class="tag">b</span><span class="class">.miaoxiaohei</span><span class="class">.com</span><span class="class">.key</span> -subj <span class="string">"/C=CN/ST=Guangdong/L=Shenzhen/O=cayley/OU=Web Security/CN=b.miaoxiaohei.com"</span></span><br></pre></td></tr></table></figure></p>
<p>PS：如果是泛域名证书，则应该填写 *.miaoxiaohei.com</p>
<p>运行命令后,会在当前目录生成两个文件:<br>    b.miaoxiaohei.com.csr :用于跟第三方CA机构获取证书<br>    b.miaoxiaohei.com.key :ssl私钥,用于服务器配置</p>
<p>2)从第三方CA机构获取证书:</p>
<p>由于只有浏览器或者系统信赖的 CA 才可以让所有的访问者通畅的访问你的加密网站，而不是出现证书错误的提示。所以跳过自签证书的步骤，直接开始签署第三方可信任的 SSL 证书.</p>
<p>b.miaoxiaohei.com.csr 这个 CSR 文件就是你需要提交给 SSL 认证机构的，当你的域名或组织通过验证后，认证机构就会颁发给你一个 b.miaoxiaohei.com.crt</p>
<p>目前一般市面上针对中小站长和企业的 SSL 证书颁发机构有：</p>
<p>StartSSL</p>
<p>Comodo / 子品牌 Positive SSL</p>
<p>GlobalSign / 子品牌 AlphaSSL</p>
<p>GeoTrust / 子品牌 RapidSSL</p>
<p>这里我使用 <a href="https://www.startssl.com/" target="_blank" rel="external">StartSSL</a> 首先进入StartSSL,注册账号,申请免费的证书(免费证书需要一个月申请一次,比较坑),土豪|企业可以直接用钱买.</p>
<p>这时候验证需要提供一些资料,先准备好.</p>
<p>申请成功后会提供,下载证书,会得到下面的几个证书文件<br>ApacheServer.zip<br>IISServer.zip<br>NginxServer.zip<br>OtherServer.zip</p>
<p>这时候,总共得到3个文件:<br>  b.miaoxiaohei.com.csr ,b.miaoxiaohei.com.key  1_b.miaoxiaohei.com_bundle.crt</p>
<p>同时，为了方便操作，我把这三个文件都移动到 /home/www/ssl 目录。</p>
<p>证书获取完成.</p>
<p>3.nginx 配置 HTTPS 网站以及增加安全的配置</p>
<p>1)配置nginx<br>然后可以修改 Nginx 配置文件<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">$vim /usr/local/nginx/conf/vhost.d/b.miaoxiaohei.conf</span><br><span class="line"></span><br><span class="line">server </span><span class="expression">&#123;</span><br><span class="line">    <span class="variable">listen</span> 80;</span><br><span class="line">    <span class="begin-block">#listen </span>[::]:80 <span class="variable">ssl</span> <span class="variable">ipv</span>6<span class="variable">only</span>=<span class="variable">on</span>; </span><br><span class="line">    <span class="variable">listen</span> 443 <span class="variable">ssl</span>;</span><br><span class="line">    <span class="begin-block">#listen </span>[::]:443 <span class="variable">ssl</span> <span class="variable">ipv</span>6<span class="variable">only</span>=<span class="variable">o</span></span><br><span class="line">    <span class="variable">server</span>_<span class="variable">name</span> <span class="variable">b.miaoxiaohei.com</span>;</span><br><span class="line">    <span class="variable">root</span>    <span class="end-block">/home</span><span class="end-block">/www</span><span class="end-block">/cayleyblogs</span>;</span><br><span class="line">    <span class="variable">index</span>   <span class="variable">index.html</span>;</span><br><span class="line">    <span class="variable">access</span>_<span class="variable">log</span>  <span class="end-block">/home</span><span class="end-block">/www</span><span class="end-block">/log</span><span class="end-block">/cayleyblogs-access.log</span>;</span><br><span class="line">    <span class="variable">error</span>_<span class="variable">log</span>   <span class="end-block">/home</span><span class="end-block">/www</span><span class="end-block">/log</span><span class="end-block">/cayleyblogs-error.log</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable">ssl</span> <span class="variable">on</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">certificate</span> <span class="end-block">/home</span><span class="end-block">/www</span><span class="end-block">/ssl</span>/1_<span class="variable">b.miaoxiaohei.com</span>_<span class="variable">bundle.crt</span>;</span><br><span class="line">    <span class="variable">ssl</span>_<span class="variable">certificate</span>_<span class="variable">key</span> <span class="end-block">/home</span><span class="end-block">/www</span><span class="end-block">/ssl</span><span class="end-block">/b.miaoxiaohei.com.key</span>;</span><br><span class="line">&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><br>检测配置文件没问题后,重启 Nginx 即可<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nginx</span> -t &amp;&amp; nginx -s reload</span><br></pre></td></tr></table></figure></p>
<p>2)增加安全配置</p>
<p>但是这么做并不安全，默认是 SHA-1 形式，而现在主流的方案应该都避免 SHA-1，为了确保更强的安全性，我们可以采取迪菲－赫尔曼密钥交换</p>
<p>首先，进入 /home/www/ssl 目录并生成一个 dhparam.pem</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$cd  /home/www/ssl</span><br><span class="line"><span class="preprocessor"># 如果你的机器性能足够强大，可以用 <span class="number">4096</span> 位加密</span></span><br><span class="line">$openssl dhparam -out dhparam.pem <span class="number">2048</span>   </span><br><span class="line"></span><br><span class="line">$ openssl dhparam -out dhparam.pem <span class="number">2048</span></span><br><span class="line">Generating DH parameters, <span class="number">2048</span> bit <span class="keyword">long</span> safe prime, generator <span class="number">2</span></span><br><span class="line">This is going to take a <span class="keyword">long</span> time</span><br><span class="line">...........................++*++*</span><br><span class="line">$ ls  <span class="preprocessor">#新增一个dhparam.pem文件</span></span><br><span class="line"><span class="number">1</span>_b.miaoxiaohei.com_bundle.crt  b.miaoxiaohei.com.csr </span><br><span class="line"> b.miaoxiaohei.com.key  dhparam.pem</span><br></pre></td></tr></table></figure>
<p>生成完毕后，在 Nginx 的 SSL 配置后面加入<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">ssl_prefer_server_ciphers</span> <span class="built_in">on</span>;</span><br><span class="line"><span class="title">ssl_dhparam</span> /home/www/ssl/dhparam.pem;</span><br><span class="line"><span class="title">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"><span class="title">ssl_ciphers</span> <span class="string">"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"</span>;</span><br><span class="line"><span class="title">keepalive_timeout</span> <span class="number">70</span>;</span><br><span class="line"><span class="title">ssl_session_cache</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line"><span class="title">ssl_session_timeout</span> <span class="number">10m</span>;</span><br></pre></td></tr></table></figure><br>同时，如果是全站 HTTPS 并且不考虑 HTTP 的话，可以加入 HSTS 告诉你的浏览器本网站全站加密，并且强制用 HTTPS 访问<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_header </span><span class="keyword">Strict-Transport-Security </span>max-age<span class="number">=63072000</span><span class="comment">;</span></span><br><span class="line"><span class="keyword">add_header </span>X-Frame-Options DENY<span class="comment">;</span></span><br><span class="line"><span class="keyword">add_header </span>X-Content-Type-Options nosniff<span class="comment">;</span></span><br></pre></td></tr></table></figure><br>同时也可以单独开一个 Nginx 配置，把 HTTP 的访问请求都用 301 跳转到 HTTPS<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">server</span> &#123;  </span><br><span class="line">        <span class="title">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="comment">#listen [::]:80 ipv6only=on;</span></span><br><span class="line">        <span class="title">server_name</span>     b.miaoxiaohei.com;</span><br><span class="line">        <span class="title">return</span> <span class="number">301</span> <span class="url">https://b.miaoxiaohei.com<span class="variable">$request_uri</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>完整配置代码如下:<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">server</span> &#123;</span><br><span class="line">    <span class="title">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="comment">#listen [::]:80 ssl ipv6only=on; </span></span><br><span class="line">    <span class="title">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="comment">#listen [::]:443 ssl ipv6only=o</span></span><br><span class="line">    <span class="title">server_name</span> b.miaoxiaohei.com;</span><br><span class="line">    <span class="title">root</span>    /home/www/cayleyblogs;</span><br><span class="line">    <span class="title">index</span>   index.html;</span><br><span class="line">    <span class="comment">#log info</span></span><br><span class="line">    <span class="title">access_log</span>  /home/www/log/cayleyblogs-access.log;</span><br><span class="line">    <span class="title">error_log</span>   /home/www/log/cayleyblogs-<span class="built_in">error</span>.log;</span><br><span class="line">    <span class="comment"># location / &#123;</span></span><br><span class="line">    <span class="comment">#    proxy_set_header   X-Real-IP $remote_addr;</span></span><br><span class="line">    <span class="comment">#    proxy_set_header   Host      $http_host;</span></span><br><span class="line">    <span class="comment">#    proxy_pass         http://0.0.0.0:4000;</span></span><br><span class="line">    <span class="comment"># &#125;</span></span><br><span class="line">    <span class="comment">#告诉浏览器网站已启用https ,并强制使用https</span></span><br><span class="line">    <span class="title">add_header</span> Strict-Transport-Security max-age=<span class="number">63072000</span>;</span><br><span class="line">    <span class="title">add_header</span> X-Frame-Options DENY;</span><br><span class="line">    <span class="title">add_header</span> X-Content-Type-Options nosniff;</span><br><span class="line">    <span class="comment">#开启https</span></span><br><span class="line">    <span class="title">ssl</span> <span class="built_in">on</span>;</span><br><span class="line">    <span class="title">ssl_certificate</span> /home/www/ssl/1_b.miaoxiaohei.com_bundle.crt;</span><br><span class="line">    <span class="title">ssl_certificate_key</span> /home/www/ssl/b.miaoxiaohei.com.key;</span><br><span class="line">    <span class="comment">#增强安全配置</span></span><br><span class="line">    <span class="title">ssl_prefer_server_ciphers</span> <span class="built_in">on</span>;</span><br><span class="line">    <span class="title">ssl_dhparam</span> /home/www/ssl/dhparam.pem;</span><br><span class="line">    <span class="title">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="title">ssl_ciphers</span> <span class="string">"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4"</span>;</span><br><span class="line">    <span class="title">keepalive_timeout</span> <span class="number">70</span>;</span><br><span class="line">    <span class="title">ssl_session_cache</span> shared:SSL:<span class="number">10m</span>;</span><br><span class="line">    <span class="title">ssl_session_timeout</span> <span class="number">10m</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#只允许https访问</span></span><br><span class="line"><span class="title">server</span> &#123;  </span><br><span class="line">        <span class="title">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="comment">#listen [::]:80 ipv6only=on;</span></span><br><span class="line">        <span class="title">server_name</span>     b.miaoxiaohei.com;</span><br><span class="line">        <span class="title">return</span> <span class="number">301</span> <span class="url">https://b.miaoxiaohei.com<span class="variable">$request_uri</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>4.apache配置:</p>
<p>申请成功后会提供,下载证书 ,解压ApacheServer.zip,会得到下面两个文件:<br>1_root_bundle.crt<br>2_b.miaoxiaohei.com.crt</p>
<p>另外需要下載 intermediate 和 root CA 证书<br>如果缺少这个两个，Firefox 會出現「sec_error_unknown_issuer」<br>并且出現警告该页面,告訴你不要信任 StartSSL 的 SSL 证书</p>
<p>下载地址如下:<br><a href="http://www.startssl.com/certs/sub.class1.server.ca.pem" target="_blank" rel="external">http://www.startssl.com/certs/sub.class1.server.ca.pem</a><br><a href="http://www.startssl.com/certs/ca.pem" target="_blank" rel="external">http://www.startssl.com/certs/ca.pem</a></p>
<p>1)首先检查Apache 有沒有安裝 mod_ssl<br>如果没有安装,可以通过yum install mod_ssl 來安裝 || 编译安装</p>
<p>2) 接下来将 b.miaoxiaohei.com.key 上到 /etc/pki/tls/private/<br>   将2_b.miaoxiaohei.com.crt 上传到 /etc/pki/tls/certs/<br>   将sub.class1.server.ca.pem 以及 ca.pem 上传到 /etc/pki/tls/</p>
<p>3) 解密私钥,如果沒有解密的话，每次 Apache 启动后都要加入密码<br>解密步骤如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#cd</span> /etc/pki/tls/private/</span><br><span class="line"><span class="id">#openssl</span> rsa -<span class="keyword">in</span> <span class="tag">b</span><span class="class">.miaoxiaohei</span><span class="class">.com</span><span class="class">.key</span> -out <span class="tag">b</span><span class="class">.miaoiaohei</span><span class="class">.com</span><span class="class">.key</span></span><br></pre></td></tr></table></figure><br>接下来会提示你输入密码</p>
<p>4) 在打开 /etc/httpd/conf.d/ssl.conf<br>将 ssl.conf 各项配置修改如下<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SSLCertificateFile /etc/pki/tls/certs/<span class="number">2</span>_b<span class="class">.miaoxiaohei</span><span class="class">.com</span><span class="class">.crt</span></span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/<span class="tag">b</span><span class="class">.miaoxiaohei</span><span class="class">.com</span><span class="class">.key</span></span><br><span class="line">SSLCertificateChainFile /etc/pki/tls/sub<span class="class">.class1</span><span class="class">.server</span><span class="class">.ca</span><span class="class">.pem</span></span><br><span class="line">SSLCACertificateFile /etc/pki/tls/ca.pem</span><br></pre></td></tr></table></figure><br>5) 重启apache</p>
<p>参考:</p>
<a href="http://www.startssl.com" target="_blank" rel="external">startssl</a>
<a href="http://blog.mowd.tw/index.php?pl=950#p_tb" target="_blank" rel="external">申請免費 StartSSL 證書並開啟 Apache SSL 完整教學</a>
</div><a data-url="http://b.miaoxiaohei.com/2016/02/19/配置SSL证书-搭建HTTPS/" data-id="cir7uxjua0005jvi0qnnatj2k" class="article-share-link">分享到</a><div class="tags"><a href="/tags/https/">https</a></div><div class="post-nav"><a href="/2016/02/19/php7和nginx1-9安装脚本/" class="pre"><i class="fa fa-caret-left"> php7和nginx1.9安装脚本</i></a><a href="/2016/02/19/ssh秘钥登陆/" class="next">ssh秘钥登陆 <i class="fa fa-caret-right"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'cayleyblogs';
var disqus_identifier = '2016/02/19/配置SSL证书-搭建HTTPS/';
var disqus_title = '配置SSL证书+搭建HTTPS';
var disqus_url = 'http://b.miaoxiaohei.com/2016/02/19/配置SSL证书-搭建HTTPS/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//cayleyblogs.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="si" value="http://b.miaoxiaohei.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/liunx/">liunx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/composer/" style="font-size: 15px;">composer</a> <a href="/tags/https/" style="font-size: 15px;">https</a> <a href="/tags/科学上网/" style="font-size: 15px;">科学上网</a> <a href="/tags/libiconv/" style="font-size: 15px;">libiconv</a> <a href="/tags/yum/" style="font-size: 15px;">yum</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/路由宝刷机pandorabox后利用自带存储卡/">路由宝刷机pandorabox后利用自带存储卡</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/使用ownCloud搭建云盘/">使用ownCloud搭建云盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/编译安装libiconv库/">编译安装libiconv库</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/使用seafile搭建云盘/">使用seafile搭建云盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/17/nginx的使用与配置/">nginx的使用与配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/06/nginx安装分析/">nginx安装分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis安全/">redis安全</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis高级命令/">redis高级命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis基本命令/">redis基本命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/03/redis配置/">redis配置</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//cayleyblogs.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">凯旋.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>