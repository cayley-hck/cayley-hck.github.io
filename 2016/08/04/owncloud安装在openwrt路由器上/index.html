<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录前进的脚步"><title>owncloud安装在openwrt路由器上 | 凯旋</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">owncloud安装在openwrt路由器上</h1><a id="logo" href="/.">凯旋</a><p class="description">cayley的博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">owncloud安装在openwrt路由器上</h1><div class="post-meta"><i class="fa fa-calendar"> 2016-08-04</i></div><span data-disqus-identifier="2016/08/04/owncloud安装在openwrt路由器上/" class="disqus-comment-count"></span><div class="post-content"><p>之前研究owncloud,突然想将它装在家里的路由器上.<br>说干就干,然后记录以下自己忙活的过程.</p>
<p>1.下载源码:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@PandoraBox:/root]<span class="preprocessor"># mkdir /data/codebase</span></span><br><span class="line">[rroot@PandoraBox:/root]<span class="preprocessor"># wget https:<span class="comment">//download.owncloud.org/community/owncloud-9.1.0.tar.bz2</span></span></span><br><span class="line">--<span class="number">2016</span>-<span class="number">07</span>-<span class="number">27</span> <span class="number">17</span>:<span class="number">21</span>:<span class="number">11</span>--  https:<span class="comment">//download.owncloud.org/community/owncloud-9.1.0.tar.bz2</span></span><br><span class="line">Resolving download.owncloud.org (download.owncloud.org)... <span class="number">188.40</span><span class="number">.127</span><span class="number">.122</span>, <span class="number">148.251</span><span class="number">.209</span><span class="number">.106</span>, <span class="number">188.40</span><span class="number">.68</span><span class="number">.177</span>, ...</span><br><span class="line">Connecting to download.owncloud.org (download.owncloud.org)|<span class="number">188.40</span><span class="number">.127</span><span class="number">.122</span>|:<span class="number">443.</span>.. connected.</span><br><span class="line">HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line">Length: <span class="number">29055490</span> (<span class="number">28</span>M) [application/x-bzip2]</span><br><span class="line">Saving to: wncloud-<span class="number">9.1</span><span class="number">.0</span>.tar.bz2</span><br><span class="line"><span class="number">2016</span>-<span class="number">07</span>-<span class="number">27</span> <span class="number">17</span>:<span class="number">44</span>:<span class="number">55</span></span><br></pre></td></tr></table></figure></p>
<p>解压源码:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#需要先安装tar</span></span><br><span class="line">[root<span class="variable">@PandoraBox</span><span class="symbol">:/root</span>]<span class="comment"># opkg install tar</span></span><br><span class="line"><span class="comment">#解压</span></span><br><span class="line">[root<span class="variable">@PandoraBox</span><span class="symbol">:/root</span>]<span class="comment"># tar -xvf owncloud-9.1.0.tar.bz2 -C /data/codebase/</span></span><br></pre></td></tr></table></figure></p>
<p>2.安装php:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@PandoraBox:/root]# opkg <span class="operator"><span class="keyword">install</span> php5 php5-cgi php5-fastcgi php5-<span class="keyword">mod</span>-<span class="keyword">json</span> php5-<span class="keyword">mod</span>-<span class="keyword">session</span> php5-<span class="keyword">mod</span>-zip libsqlite3 zoneinfo-core php5-<span class="keyword">mod</span>-pdo php5-<span class="keyword">mod</span>-pdo-sqlite php5-<span class="keyword">mod</span>-ctype php5-<span class="keyword">mod</span>-mbstring php5-<span class="keyword">mod</span>-gd sqlite3-cli php5-<span class="keyword">mod</span>-sqlite3 php5-<span class="keyword">mod</span>-curl curl php5-<span class="keyword">mod</span>-<span class="keyword">xml</span> php5-<span class="keyword">mod</span>-simplexml php5-<span class="keyword">mod</span>-<span class="keyword">hash</span> php5-<span class="keyword">mod</span>-dom php5-<span class="keyword">mod</span>-iconv</span><br><span class="line"></span><br><span class="line">[root@PandoraBox:/root]# opkg <span class="keyword">install</span> php5-<span class="keyword">mod</span>-mcrypt php5-<span class="keyword">mod</span>-openssl php5-<span class="keyword">mod</span>-fileinfo php5-<span class="keyword">mod</span>-exif</span><br><span class="line"></span><br><span class="line">[root@PandoraBox:/root]#opkg <span class="keyword">install</span> php5-<span class="keyword">mod</span>-xmlreader php5-<span class="keyword">mod</span>-xmlwriter</span></span><br></pre></td></tr></table></figure></p>
<p>那些梗:</p>
<p>安装完成后,运行发先出错了,错误如下:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@PandoraBox:/root]#php-cli </span><br><span class="line">PHP Warning:  PHP Startup: Unable to <span class="operator"><span class="keyword">load</span> dynamic <span class="keyword">library</span> <span class="string">'/usr/lib/php/gd.so'</span> - <span class="keyword">File</span> <span class="keyword">not</span> <span class="keyword">found</span> <span class="keyword">in</span> <span class="keyword">Unknown</span> <span class="keyword">on</span> line <span class="number">0</span></span></span><br></pre></td></tr></table></figure><br>查资料后,发现可能是lib库的问题,重装下:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@PandoraBox</span><span class="symbol">:/root</span>]<span class="comment">#opkg install php5-mod-gd libjpeg libpng libgd  --force-reinstal</span></span><br></pre></td></tr></table></figure></p>
<p>然后报错:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">[root@PandoraBox:/root]#opkg <span class="operator"><span class="keyword">install</span> php5-<span class="keyword">mod</span>-gd libjpeg libpng libgd  <span class="comment">--force-r</span></span><br><span class="line">einstall</span><br><span class="line">Removing <span class="keyword">package</span> php5-<span class="keyword">mod</span>-gd <span class="keyword">from</span> root...</span><br><span class="line">Removing <span class="keyword">package</span> libpng <span class="keyword">from</span> root...</span><br><span class="line">Installing php5-<span class="keyword">mod</span>-gd (<span class="number">5.4</span><span class="number">.27</span>-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Downloading <span class="keyword">http</span>://downloads.openwrt.org.cn/PandoraBox/ralink/packages/oldpackages/php5-<span class="keyword">mod</span>-gd_5<span class="number">.4</span><span class="number">.27</span>-<span class="number">1</span>_ralink.ipk.</span><br><span class="line">Installing libjpeg (<span class="number">9</span>a-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Installing libjpeg (<span class="number">9</span>a-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Installing libpng (<span class="number">1.2</span><span class="number">.51</span>-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Downloading <span class="keyword">http</span>://downloads.openwrt.org.cn/PandoraBox/ralink/packages/packages/libpng_1<span class="number">.2</span><span class="number">.51</span>-<span class="number">1</span>_ralink.ipk.</span><br><span class="line">Installing libgd (<span class="number">2.1</span><span class="number">.0</span>-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Downloading <span class="keyword">http</span>://downloads.openwrt.org.cn/PandoraBox/ralink/packages/packages/libgd_2<span class="number">.1</span><span class="number">.0</span>-<span class="number">1</span>_ralink.ipk.</span><br><span class="line">Installing libjpeg (<span class="number">9</span>a-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Configuring libpng.</span><br><span class="line">Collected <span class="keyword">errors</span>:</span><br><span class="line"> * opkg_download_pkg: <span class="keyword">Package</span> libjpeg <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">from</span> <span class="keyword">any</span> configured src.</span><br><span class="line"> * opkg_install_pkg: <span class="keyword">Failed</span> <span class="keyword">to</span> download libjpeg. Perhaps you need <span class="keyword">to</span> run <span class="string">'opkg update'</span>?</span><br><span class="line"> #所以严重怀疑是libjepg库,没装好</span><br><span class="line"> * opkg_install_cmd: Cannot <span class="keyword">install</span> <span class="keyword">package</span> php5-<span class="keyword">mod</span>-gd.</span><br><span class="line"> * opkg_download_pkg: <span class="keyword">Package</span> libjpeg <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">from</span> <span class="keyword">any</span> configured src.</span><br><span class="line"> * opkg_install_pkg: <span class="keyword">Failed</span> <span class="keyword">to</span> download libjpeg. Perhaps you need <span class="keyword">to</span> run <span class="string">'opkg update'</span>?</span><br><span class="line"> * opkg_install_cmd: Cannot <span class="keyword">install</span> <span class="keyword">package</span> libjpeg.</span><br><span class="line"> * opkg_download_pkg: <span class="keyword">Package</span> libjpeg <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">from</span> <span class="keyword">any</span> configured src.</span><br><span class="line"> * opkg_install_pkg: <span class="keyword">Failed</span> <span class="keyword">to</span> download libjpeg. Perhaps you need <span class="keyword">to</span> run <span class="string">'opkg update'</span>?</span><br><span class="line"> * opkg_install_cmd: Cannot <span class="keyword">install</span> <span class="keyword">package</span> libgd.</span><br><span class="line"></span><br><span class="line">#怀疑libjepg库,没装好,所以单独装一下:</span><br><span class="line">[root@PandoraBox:/root]#opkg <span class="keyword">install</span>  libjpeg</span><br><span class="line">Installing libjpeg (<span class="number">9</span>a-<span class="number">1</span>) <span class="keyword">to</span> root...</span><br><span class="line">Collected <span class="keyword">errors</span>:</span><br><span class="line"> * opkg_download_pkg: <span class="keyword">Package</span> libjpeg <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">from</span> <span class="keyword">any</span> configured src.</span><br><span class="line"> * opkg_install_pkg: <span class="keyword">Failed</span> <span class="keyword">to</span> download libjpeg. Perhaps you need <span class="keyword">to</span> run <span class="string">'opkg update'</span>?</span><br><span class="line"> * opkg_install_cmd: Cannot <span class="keyword">install</span> <span class="keyword">package</span> libjpeg.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> #所以应该这个包没法现在,看下还有那些可以替代的包</span><br><span class="line"> [root@PandoraBox:/root]#opkg <span class="keyword">list</span> libjpeg*</span><br><span class="line">libjpeg - <span class="number">9</span>a-<span class="number">1</span></span><br><span class="line">libjpeg - <span class="number">6</span>b-<span class="number">1</span> - The Independent JPEG <span class="keyword">Group</span><span class="string">'s JPEG runtime library</span><br><span class="line">#发现libjpeg - 6b-1可用,然后去官网下载这个包,安装:</span><br><span class="line">[root@PandoraBox:/root]#wget http://downloads.openwrt.org.cn/PandoraBox/ralink/p</span><br><span class="line">ackages/packages/libjpeg_6b-1_ralink.ipk</span><br><span class="line">--2016-08-03 21:15:58--  http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/packages/libjpeg_6b-1_ralink.ipk</span><br><span class="line">Resolving downloads.openwrt.org.cn... 106.185.25.62</span><br><span class="line">Connecting to downloads.openwrt.org.cn|106.185.25.62|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 55298 (54K) [application/octet-stream]</span><br><span class="line">Saving to: '</span>libjpeg_6b-<span class="number">1</span>_ralink.ipk<span class="string">'</span><br><span class="line"></span><br><span class="line">libjpeg_6b-1_ralink 100%[=====================&gt;]  54.00K  15.1KB/s   in 3.6s   </span><br><span class="line"></span><br><span class="line">2016-08-03 21:16:03 (15.1 KB/s) - '</span>libjpeg_6b-<span class="number">1</span>_ralink.ipk<span class="string">' saved [55298/55298]</span><br><span class="line"></span><br><span class="line">[root@PandoraBox:/root]#opkg install libjpeg_6b-1_ralink.ipk </span><br><span class="line">Installing libjpeg (6b-1) to root...</span><br><span class="line">Configuring libjpeg.</span><br><span class="line"></span><br><span class="line">#最后再安装一下php-gd,发现问题解决了</span><br><span class="line">[root@PandoraBox:/root]#opkg install php5-mod-gd </span><br><span class="line">Installing php5-mod-gd (5.4.27-1) to root...</span><br><span class="line">Downloading http://downloads.openwrt.org.cn/PandoraBox/ralink/packages/oldpackages/php5-mod-gd_5.4.27-1_ralink.ipk.</span><br><span class="line"></span><br><span class="line">Configuring php5-mod-gd.</span></span></span><br></pre></td></tr></table></figure></p>
<p>3.配置web server:</p>
<p>对于web server,本来想用nginx,但发现pandorabox有自带的uhttp,所有用自带的.修改相应配置文件/etc/config/uhttpd<br>配置如下:<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/config/uhttpd</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#首先将原来路由器的web的端口改为其他的,我这里改为88 和4430</span></span><br><span class="line">config uhttpd <span class="comment">'main'</span></span><br><span class="line">	list listen_http <span class="comment">'0.0.0.0:88' </span></span><br><span class="line">	list listen_http <span class="comment">'[::]:88'</span></span><br><span class="line">	list listen_https <span class="comment">'0.0.0.0:4430'</span></span><br><span class="line">	list listen_https <span class="comment">'[::]:4430'</span></span><br><span class="line">	<span class="keyword">option</span> home <span class="comment">'/www'</span></span><br><span class="line">	<span class="keyword">option</span> rfc1918_filter <span class="comment">'1'</span></span><br><span class="line">	<span class="keyword">option</span> max_requests <span class="comment">'3'</span></span><br><span class="line">	<span class="keyword">option</span> max_connections <span class="comment">'100'</span></span><br><span class="line">	<span class="keyword">option</span> cert <span class="comment">'/etc/uhttpd.crt'</span></span><br><span class="line">	<span class="keyword">option</span> <span class="keyword">key</span> <span class="comment">'/etc/uhttpd.key'</span></span><br><span class="line">	<span class="keyword">option</span> cgi_prefix <span class="comment">'/cgi-bin'</span></span><br><span class="line">	<span class="keyword">option</span> script_timeout <span class="comment">'60'</span></span><br><span class="line">	<span class="keyword">option</span> network_timeout <span class="comment">'30'</span></span><br><span class="line">	<span class="keyword">option</span> http_keepalive <span class="comment">'20'</span></span><br><span class="line">	<span class="keyword">option</span> tcp_keepalive <span class="comment">'1'</span></span><br><span class="line">	<span class="keyword">option</span> ubus_prefix <span class="comment">'/ubus'</span></span><br><span class="line">	list index_page <span class="comment">'cgi-bin/luci'</span></span><br><span class="line"></span><br><span class="line">config cert <span class="comment">'px5g'</span></span><br><span class="line">	<span class="keyword">option</span> days <span class="comment">'730'</span></span><br><span class="line">	<span class="keyword">option</span> bits <span class="comment">'1024'</span></span><br><span class="line">	<span class="keyword">option</span> country <span class="comment">'DE'</span></span><br><span class="line">	<span class="keyword">option</span> state <span class="comment">'Berlin'</span></span><br><span class="line">	<span class="keyword">option</span> location <span class="comment">'Berlin'</span></span><br><span class="line">	<span class="keyword">option</span> commonname <span class="comment">'OpenWrt'</span></span><br><span class="line"><span class="preprocessor">#配置</span></span><br><span class="line">config uhttpd <span class="comment">'owncloud'</span></span><br><span class="line">        list listen_http <span class="comment">'0.0.0.0:80'</span></span><br><span class="line">        list listen_http <span class="comment">'[::]:80'</span></span><br><span class="line">        list listen_https <span class="comment">'0.0.0.0:443'</span></span><br><span class="line">        list listen_https <span class="comment">'[::]:443'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">option</span> home <span class="comment">'/data/codebase/owncloud'</span></span><br><span class="line">        <span class="keyword">option</span> index_page  index.php, index.html, index.htm, <span class="keyword">default</span>.html, <span class="keyword">default</span>.htm</span><br><span class="line"></span><br><span class="line">        <span class="keyword">option</span> rfc1918_filter <span class="comment">'1'</span></span><br><span class="line">        <span class="keyword">option</span> max_requests <span class="comment">'3'</span></span><br><span class="line">        <span class="keyword">option</span> max_connections <span class="comment">'100'</span></span><br><span class="line">        <span class="keyword">option</span> cert <span class="comment">'/data/ssl/c.miaoxiaohei.com.crt'</span></span><br><span class="line">        <span class="keyword">option</span> <span class="keyword">key</span> <span class="comment">'/data/ssl/c.miaoxiaohei.com.key'</span></span><br><span class="line">        <span class="keyword">option</span> script_timeout <span class="comment">'60'</span></span><br><span class="line">        <span class="keyword">option</span> network_timeout <span class="comment">'30'</span></span><br><span class="line">        <span class="keyword">option</span> http_keepalive <span class="comment">'20'</span></span><br><span class="line">        <span class="keyword">option</span> tcp_keepalive <span class="comment">'1'</span></span><br><span class="line">        <span class="keyword">option</span> cgi_prefix <span class="comment">'/cgi-bin'</span></span><br><span class="line">        <span class="preprocessor">#配置php-cgi</span></span><br><span class="line">        list interpreter  <span class="string">".php=/usr/bin/php-cgi"</span></span><br></pre></td></tr></table></figure></p>
<p>4.打开浏览器,输入192.168.1.1 进入安装安装界面<br>安装之前需要创建打data目录,存放数据<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@PandoraBox</span><span class="symbol">:/root</span>]<span class="comment"># mkdir /data/codeblock/owncloud/data</span></span><br></pre></td></tr></table></figure></p>
<p>那些梗:<br>安装的时间,发现报错了,具体错误如下:</p>
<p>设置语言为 en_US.UTF-8/fr_FR.UTF-8/es_ES.UTF-8/de_DE.UTF-8/ru_RU.UTF-8/pt_BR.UTF-8/it_IT.UTF-8/ja_JP.UTF-8/zh_CN.UTF-8 失败<br>Please install one of these locales on your system and restart your webserver.</p>
<p>然后找了很久的解决方案,1)安装6以下的owncloud版本 2)设置语言 3)修改代码</p>
<p>然后我用修改代码的方法解决了<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="annotation">@PandoraBox</span>:<span class="regexp">/root]#vim /</span>data<span class="regexp">/codebase/</span>owncloud<span class="regexp">/lib/</span><span class="keyword">private</span><span class="regexp">/legacy/</span>util.php </span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> function isSetLocaleWorking() &#123;                           </span><br><span class="line">                <span class="comment">// setlocale test is pointless on Windows                      </span></span><br><span class="line">                <span class="keyword">if</span> (<span class="string">OC_Util:</span>:runningOnWindows()) &#123;                              </span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;                                            </span><br><span class="line">                &#125;                                                               </span><br><span class="line">                                                                                </span><br><span class="line">                \Patchwork\Utf8\<span class="string">Bootup:</span>:initLocale();                         </span><br><span class="line">                <span class="comment">//将这里注释掉了</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="string">''</span> === basename(<span class="string">'..'</span>)) &#123;                                    </span><br><span class="line">                        <span class="comment">//return false;                                         </span></span><br><span class="line">                &#125;                                                               </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;                                                    </span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>到这里……………..就已经安装完成.</p>
<p>安装完成后,发现运行不是很流畅,性能有问题</p>
</div><a data-url="http://b.miaoxiaohei.com/2016/08/04/owncloud安装在openwrt路由器上/" data-id="cit88wha1001gcmgoo4p2enlx" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/2016/08/04/openwrt上的uhttp的使用与配置/" class="pre"><i class="fa fa-caret-left"> openwrt上的uhttp的使用与配置</i></a><a href="/2016/07/29/路由宝刷机pandorabox后利用自带存储卡/" class="next">路由宝刷机pandorabox后利用自带存储卡 <i class="fa fa-caret-right"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'cayleyblogs';
var disqus_identifier = '2016/08/04/owncloud安装在openwrt路由器上/';
var disqus_title = 'owncloud安装在openwrt路由器上';
var disqus_url = 'http://b.miaoxiaohei.com/2016/08/04/owncloud安装在openwrt路由器上/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//cayleyblogs.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="si" value="http://b.miaoxiaohei.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/liunx/">liunx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/https/" style="font-size: 15px;">https</a> <a href="/tags/科学上网/" style="font-size: 15px;">科学上网</a> <a href="/tags/libiconv/" style="font-size: 15px;">libiconv</a> <a href="/tags/yum/" style="font-size: 15px;">yum</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/composer/" style="font-size: 15px;">composer</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/PhantomJS总结/">PhantomJS总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/优雅的终端/">优雅的终端</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/07/php设计模式-委托/">php设计模式-委托</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/php设计模式-装饰器/">php设计模式-装饰器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/php设计模式-数据访问对象模式/">php设计模式-数据访问对象模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/php设计模式-建造者/">php设计模式-建造者</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/php设计模式-适配器/">php设计模式-适配器</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/06/php设计模式学习总结/">php设计模式学习总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/31/CocoaPods-IOS的类库管理工具/">CocoaPods->IOS的类库管理工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/15/字符编码总结/">字符编码总结</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//cayleyblogs.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">凯旋.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>